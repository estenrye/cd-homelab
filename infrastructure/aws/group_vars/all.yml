aws:
  ami_name_prefix: ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*
  region: us-west-2
  az: us-west-2a
  key:
    name: "{{ lookup('env', 'KEY_NAME') | default('esten-pf9-mac-rsa', 'true') }}"
    file: "{{ lookup('env', 'KEY_FILE') | default('~/.ssh/id_rsa.pub', 'true') }}"
  tags:
    Product: "{{ lookup('env', 'TAG_PRODUCT') | default('nodectl', true) }}"
    Team: "{{ lookup('env', 'TAG_TEAM') | default('devops', true) }}"
    Environment: "{{ lookup('env', 'TAG_ENVIRONMENT') | default('dev', true) }}"
    Owner: "{{ lookup('env', 'TAG_OWNER') | default('Esten Rye', true) }}"
    Cluster: "{{ lookup('env', 'TAG_CLUSTER') | default('infra-cluster', true) }}"
vpc:
  name: "{{ aws.tags.Environment }}_{{ aws.tags.Product }}_{{ aws.tags.Team }}_{{ aws.tags.Cluster }}"
  cidr_block:
    - 10.5.0.0/16
  subnets:
    public: 10.5.25.0/24
    private: 10.5.50.0/24
  instance_counts:
    nodelet_master: 5
    nodelet_worker: 3
  instance_types:
    jumphost: m4.xlarge
    nodelet_master: m4.xlarge
    nodelet_worker: z1d.6xlarge
  enable_nat: true

