apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: argocd

configMapGenerator:
  - name: env-properties
    env: env.properties

resources:
  - ../../base
  - apps/1password.yaml
  - apps/argocd.yaml
  - apps/cert-manager.yaml
  - apps/cert-manager-cluster-issuer.yaml
  - apps/external-dns.yaml
  - apps/ingress-nginx.yaml

replacements:
  - path: replacements/argocd-oidc-credentials.onepassworditem.yaml
  - path: replacements/argocd-ssh-secret.onepassworditem.yaml
  - path: replacements/argocd-cm.configmap.yaml
  - path: replacements/argocd-server.ingress.yaml