apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: argocd

resources:
  - resources/Namespace.yaml
  - https://raw.githubusercontent.com/argoproj/argo-cd/v2.5.6/manifests/install.yaml
  - resources/ingress.yaml
patchesJson6902:
  - target:
      version: v1
      kind: ConfigMap
      name: argocd-cm
    path: patches/argocd-cm.yaml
  - target:
      version: v1
      group: apps
      kind: Deployment
      name: argocd-server
    path: patches/schedule-on-controlplane.yaml
  - target:
      version: v1
      group: apps
      kind: Deployment
      name: argocd-repo-server
    path: patches/schedule-on-controlplane.yaml
  - target:
      version: v1
      group: apps
      kind: Deployment
      name: argocd-redis
    path: patches/schedule-on-controlplane.yaml
  - target:
      version: v1
      group: apps
      kind: Deployment
      name: argocd-notifications-controller
    path: patches/schedule-on-controlplane.yaml
  - target:
      version: v1
      group: apps
      kind: Deployment
      name: argocd-dex-server
    path: patches/schedule-on-controlplane.yaml
