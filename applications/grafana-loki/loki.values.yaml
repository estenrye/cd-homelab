loki:
  storage:
    bucketNames:
      chunks: loki-chunks
      ruler: loki-ruler
      admin: loki-admin
    type: s3
    s3:
      s3: s3://minio.minio-tenant.svc
      s3ForcePathStyle: true
      insecure: true
  memcached:
    chunk_cache:
      enabled: true
      host: "chunk-cache-memcached.loki.svc:11211"
    results_cache:
      enabled: true
      host: "results-cache-memcached.loki.svc:11211"
      timeout: "500ms"
      default_validity: "12h"

backend:
  podAnnotations:
    operator.1password.io/inject: loki
  extraEnv:
    - name: S3_ACCESS_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/username
    - name: S3_SECRET_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/password
  extraArgs:
    - -s3.access-key-id=${S3_ACCESS_KEY}
    - -s3.secret-access-key=${S3_SECRET_KEY}
  persistence:
    storageClass: direct-csi-min-io

read:
  podAnnotations:
    operator.1password.io/inject: loki
  extraEnv:
    - name: S3_ACCESS_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/username
    - name: S3_SECRET_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/password
  extraArgs:
    - -s3.access-key-id=${S3_ACCESS_KEY}
    - -s3.secret-access-key=${S3_SECRET_KEY}
  persistence:
    storageClass: direct-csi-min-io

write:
  podAnnotations:
    operator.1password.io/inject: loki
  extraEnv:
    - name: S3_ACCESS_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/username
    - name: S3_SECRET_KEY
      value: op://Home_Lab/items/minio-tenant-loki-svc-account/password
  extraArgs:
    - -s3.access-key-id=${S3_ACCESS_KEY}
    - -s3.secret-access-key=${S3_SECRET_KEY}
  persistence:
    storageClass: direct-csi-min-io